!function t(n,e,a){function s(i,r){if(!e[i]){if(!n[i]){var u="function"==typeof require&&require;if(!r&&u)return u(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var p=e[i]={exports:{}};n[i][0].call(p.exports,function(t){var e=n[i][1][t];return s(e?e:t)},p,p.exports,t,n,e,a)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<a.length;i++)s(a[i]);return s}({1:[function(t,n,e){"use strict";var a={availableStatuses:function(){return statuses},init:function(){var t=this;t.id=$("#gameId").val(),t.id&&t.getGameData(t.id).then(function(n){n&&(t.gameData=n,t.count(n))})},getGameData:function(t){return $.ajax({type:"GET",url:"/game/"+t+"/json"})},finishGame:function(){var t=this.id;$.ajax({type:"POST",url:"/game/"+t+"/status/"+statuses.FINISH_STATUS,success:function(n){n.success&&(window.location.href="/game/"+t+"/detail")}})},count:function(t){var n=this,e=n.id;document.oncontextmenu=function(){return!1};var a={player1:{score:t.player1.score},player2:{score:t.player2.score},points:t.points,status:t.status},s=parseInt(a.player1.score)+parseInt(a.player2.score);$(".block").on("mousedown",function(t){if(a.status==statuses.FINISH_STATUS)return void(window.location.href="/game/"+n.id+"/detail");var o=$(this),i=o.data("player"),r=1==i?2:1,u=o.find(".count"),c=o.parent().find('[data-player="'+r+'"]').find(".count"),p=o.find(".wons"),l=2===t.button||!1,d=!1,f=0,m=null,v=function(t){var n="player"+t;f=0,m=0,s++,a[n].score+=1,p.html(a[n].score).addClass("animated bounceIn")};a.points.length<s+1&&a.points.push({1:0,2:0}),a.points[s][i]=parseInt(a.points[s][i]),l?a.points[s][i]-=1:a.points[s][i]+=1,a.points[s][i]<0&&(a.points[s][i]=0),l&&a.points[s][r]>=10&&a.points[s][r]-a.points[s][i]>1?v(r):a.points[s][i]>=10&&a.points[s][i]==a.points[s][r]?(f="=",m="="):a.points[s][i]>=11?a.points[s][i]-a.points[s][r]>0&&(a.points[s][i]-a.points[s][r]>1?v(i):(f=">",m="<")):d?(f=0,m=0,s++):f=a.points[s][i],u.html(f).addClass("animated bounceIn"),null!==m&&c.html(m).addClass("animated bounceIn"),_.throttle(function(){n.saveGame(e,a)},100)()})},nextGame:function(t){var n=$("main.content .row");n.addClass("hidden"),n.eq(t).removeClass("hidden")},saveGame:function(t,n){if(void 0!==t){var e=!1;3==n.player1.score||3==n.player2.score?(n.status=statuses.FINISH_STATUS,e=!0):n.status=statuses.PROCESS_STATUS,$.ajax({type:"POST",url:"/game/"+t+"/save",dataType:"json",data:JSON.stringify(n),contentType:"application/json",success:function(n){n.success?e&&(window.location.href="/game/"+t+"/detail"):alert("Ошибка сохранения")}})}}};a.init()},{}]},{},[1]);